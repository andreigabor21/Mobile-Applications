{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Andrei Gabor\\\\Desktop\\\\UNI\\\\3rd YEAR\\\\Mobile\\\\filip\\\\stocks-app\\\\src\\\\todo\\\\StockEdit.tsx\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { IonButton, IonButtons, IonContent, IonHeader, IonInput, IonLoading, IonPage, IonTitle, IonToolbar } from '@ionic/react';\nimport { getLogger } from '../core';\nimport { StockContext } from './StockProvider';\nconst log = getLogger('StockEdit');\n\nconst StockEdit = ({\n  history,\n  match\n}) => {\n  const {\n    stocks,\n    saving,\n    savingError,\n    saveStock\n  } = useContext(StockContext);\n  const [name, setName] = useState('');\n  const [price, setPrice] = useState(0);\n  const [available, setAvailable] = useState(false);\n  const [stock, setStock] = useState();\n  useEffect(() => {\n    log('useEffect');\n    const routeId = match.params.id || '';\n    const stock = stocks === null || stocks === void 0 ? void 0 : stocks.find(it => it.id === routeId);\n    setStock(stock);\n\n    if (stock) {\n      setName(stock.name);\n    }\n  }, [match.params.id, stocks]);\n\n  const handleSave = () => {\n    const editedStock = stock ? { ...stock,\n      name,\n      price,\n      available\n    } : {\n      name,\n      price,\n      available\n    };\n    saveStock && saveStock(editedStock).then(() => history.goBack());\n  };\n\n  log('render');\n  return /*#__PURE__*/React.createElement(IonPage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(IonHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(IonToolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IonTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 11\n    }\n  }, \"Edit\"), /*#__PURE__*/React.createElement(IonButtons, {\n    slot: \"end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IonButton, {\n    onClick: handleSave,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }, \"Save\")))), /*#__PURE__*/React.createElement(IonContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(IonInput, {\n    value: name,\n    onIonChange: e => setName(e.detail.value || ''),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(IonLoading, {\n    isOpen: saving,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }), savingError && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }, savingError.message || 'Failed to save stock')));\n};\n\nexport default StockEdit;","map":{"version":3,"sources":["C:/Users/Andrei Gabor/Desktop/UNI/3rd YEAR/Mobile/filip/stocks-app/src/todo/StockEdit.tsx"],"names":["React","useContext","useEffect","useState","IonButton","IonButtons","IonContent","IonHeader","IonInput","IonLoading","IonPage","IonTitle","IonToolbar","getLogger","StockContext","log","StockEdit","history","match","stocks","saving","savingError","saveStock","name","setName","price","setPrice","available","setAvailable","stock","setStock","routeId","params","id","find","it","handleSave","editedStock","then","goBack","e","detail","value","message"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAuD,OAAvD;AACA,SACEC,SADF,EAEEC,UAFF,EAGEC,UAHF,EAIEC,SAJF,EAKEC,QALF,EAMEC,UANF,EAOEC,OAPF,EAQEC,QARF,EASEC,UATF,QAUO,cAVP;AAWA,SAASC,SAAT,QAA0B,SAA1B;AACA,SAASC,YAAT,QAA6B,iBAA7B;AAIA,MAAMC,GAAG,GAAGF,SAAS,CAAC,WAAD,CAArB;;AAMA,MAAMG,SAAmC,GAAG,CAAC;AAAEC,EAAAA,OAAF;AAAWC,EAAAA;AAAX,CAAD,KAAwB;AAClE,QAAM;AAAEC,IAAAA,MAAF;AAAUC,IAAAA,MAAV;AAAkBC,IAAAA,WAAlB;AAA+BC,IAAAA;AAA/B,MAA6CrB,UAAU,CAACa,YAAD,CAA7D;AACA,QAAM,CAACS,IAAD,EAAOC,OAAP,IAAkBrB,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACsB,KAAD,EAAQC,QAAR,IAAoBvB,QAAQ,CAAC,CAAD,CAAlC;AACA,QAAM,CAACwB,SAAD,EAAYC,YAAZ,IAA4BzB,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAAC0B,KAAD,EAAQC,QAAR,IAAoB3B,QAAQ,EAAlC;AACAD,EAAAA,SAAS,CAAC,MAAM;AACda,IAAAA,GAAG,CAAC,WAAD,CAAH;AACA,UAAMgB,OAAO,GAAGb,KAAK,CAACc,MAAN,CAAaC,EAAb,IAAmB,EAAnC;AACA,UAAMJ,KAAK,GAAGV,MAAH,aAAGA,MAAH,uBAAGA,MAAM,CAAEe,IAAR,CAAaC,EAAE,IAAIA,EAAE,CAACF,EAAH,KAAUF,OAA7B,CAAd;AACAD,IAAAA,QAAQ,CAACD,KAAD,CAAR;;AACA,QAAIA,KAAJ,EAAW;AACTL,MAAAA,OAAO,CAACK,KAAK,CAACN,IAAP,CAAP;AACD;AACF,GARQ,EAQN,CAACL,KAAK,CAACc,MAAN,CAAaC,EAAd,EAAkBd,MAAlB,CARM,CAAT;;AASA,QAAMiB,UAAU,GAAG,MAAM;AACvB,UAAMC,WAAW,GAAGR,KAAK,GAAG,EAAE,GAAGA,KAAL;AAAYN,MAAAA,IAAZ;AAAkBE,MAAAA,KAAlB;AAAyBE,MAAAA;AAAzB,KAAH,GAAyC;AAACJ,MAAAA,IAAD;AAAOE,MAAAA,KAAP;AAAcE,MAAAA;AAAd,KAAlE;AACAL,IAAAA,SAAS,IAAIA,SAAS,CAACe,WAAD,CAAT,CAAuBC,IAAvB,CAA4B,MAAMrB,OAAO,CAACsB,MAAR,EAAlC,CAAb;AACD,GAHD;;AAIAxB,EAAAA,GAAG,CAAC,QAAD,CAAH;AACA,sBACE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE,oBAAC,UAAD;AAAY,IAAA,IAAI,EAAC,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAW,IAAA,OAAO,EAAEqB,UAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CAFF,CADF,CADF,eAWE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAEb,IAAjB;AAAuB,IAAA,WAAW,EAAEiB,CAAC,IAAIhB,OAAO,CAACgB,CAAC,CAACC,MAAF,CAASC,KAAT,IAAkB,EAAnB,CAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,UAAD;AAAY,IAAA,MAAM,EAAEtB,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAGGC,WAAW,iBACV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAMA,WAAW,CAACsB,OAAZ,IAAuB,sBAA7B,CAJJ,CAXF,CADF;AAqBD,CAzCD;;AA2CA,eAAe3B,SAAf","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport {\n  IonButton,\n  IonButtons,\n  IonContent,\n  IonHeader,\n  IonInput,\n  IonLoading,\n  IonPage,\n  IonTitle,\n  IonToolbar\n} from '@ionic/react';\nimport { getLogger } from '../core';\nimport { StockContext } from './StockProvider';\nimport { RouteComponentProps } from 'react-router';\nimport { StockProps } from './StockProps';\n\nconst log = getLogger('StockEdit');\n\ninterface StockEditProps extends RouteComponentProps<{\n  id?: string;\n}> {}\n\nconst StockEdit: React.FC<StockEditProps> = ({ history, match }) => {\n  const { stocks, saving, savingError, saveStock } = useContext(StockContext);\n  const [name, setName] = useState('');\n  const [price, setPrice] = useState(0);\n  const [available, setAvailable] = useState(false);\n  const [stock, setStock] = useState<StockProps>();\n  useEffect(() => {\n    log('useEffect');\n    const routeId = match.params.id || '';\n    const stock = stocks?.find(it => it.id === routeId);\n    setStock(stock);\n    if (stock) {\n      setName(stock.name);\n    }\n  }, [match.params.id, stocks]);\n  const handleSave = () => {\n    const editedStock = stock ? { ...stock, name, price, available} : {name, price, available};\n    saveStock && saveStock(editedStock).then(() => history.goBack());\n  };\n  log('render');\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonTitle>Edit</IonTitle>\n          <IonButtons slot=\"end\">\n            <IonButton onClick={handleSave}>\n              Save\n            </IonButton>\n          </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent>\n        <IonInput value={name} onIonChange={e => setName(e.detail.value || '')} />\n        <IonLoading isOpen={saving} />\n        {savingError && (\n          <div>{savingError.message || 'Failed to save stock'}</div>\n        )}\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default StockEdit;\n"]},"metadata":{},"sourceType":"module"}